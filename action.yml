name: "Custom GitHub Action with SonarScanner, kubectl, and Terraform"
description: "Runs SonarScanner, Terraform, and kubectl commands in a containerized GitHub Action."

runs:
  using: "docker"
  image: "Dockerfile"  # O Dockerfile que define o ambiente
  args:
    - ${{ inputs.sonar-command }}
    - ${{ inputs.kubectl-command }}
    - ${{ inputs.terraform-command }}

inputs:
  kubectl-command:
    description: "Custom kubectl command to run"
    required: false
    default: "get pods" 

  sonar-command:
    description: "Custom SonarScanner command to run"
    required: false
    default: "sonar-scanner -Dsonar.projectKey=default" 

  terraform-command:
    description: "Custom Terraform command to run"
    required: false
    default: "terraform plan"  # Valor padr√£o

env:
  SONAR_PROJECT_KEY: ${{ secrets.SONAR_PROJECT_KEY }}
  SONAR_SOURCES: ${{ github.workspace }}
  SONAR_HOST_URL: ${{ secrets.SONAR_HOST_URL }}
  SONAR_LOGIN: ${{ secrets.SONAR_LOGIN }}
